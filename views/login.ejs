<!-- <div class="card" style="width: 18rem;">
    <img class="card-img-top" src="..." alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title">Card title</h5>
      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
    </div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item">Cras justo odio</li>
      <li class="list-group-item">Dapibus ac facilisis in</li>
      <li class="list-group-item">Vestibulum at eros</li>
    </ul>
    <div class="card-body">
      <a href="#" class="card-link">Card link</a>
      <a href="#" class="card-link">Another link</a>
    </div>
  </div> -->

<!DOCTYPE html>

<style>
  body {
    background-color: aliceblue;
    margin-top: 20px;
  }
</style>

<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"
      defer
    ></script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-analytics.js"></script>

    <%-include('template/header.ejs')%>
    <title><%if(hasOwnProperty('title')) %></title>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-lg-4"></div>
        <div class="mt-5">
          <form action="/signInWithEmail" method="post">
            <label>Email</label>
            <input id="emailEntered" name="emailEntered" type="email" />
            <br />
            <label>password</label>
            <input
              id="passwordEntered"
              name="passwordEntered"
              type="password"
            />
            <br />
            <button id="loginButton" type="submit" class="btn btn-primary">
              login
            </button>
          </form>

          <%if(hasOwnProperty('errMsg')){%>
          <p style="color: red"><%=errMsg%></p>
          <%}%>
        </div>
      </div>
    </div>

    <!-- <script src="/__/firebase/8.7.0/firebase-app.js"></script>
<script src="/__/firebase/8.7.0/firebase-analytics.js"></script>
<script src="/__/firebase/init.js"></script> -->
  </body>
</html>

<script>
  $("myCarousel").carousel({
    interval: 2000,
  });

  $("#loginButton").attr(title, "Login with Google");
</script>

<!-- <script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyAD9-R0byZdB3-Q6r82n2z9qLEzl9ZxcnQ",
    authDomain: "taskassigner-1554b.firebaseapp.com",
    projectId: "taskassigner-1554b",
    storageBucket: "taskassigner-1554b.appspot.com",
    messagingSenderId: "496338878383",
    appId: "1:496338878383:web:d58df784e7286a4ad7395a",
    measurementId: "G-8Y1ZLKEFZK"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();

  firebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE);

  $('#loginButton').submit(function(event){
    event.preventDefault()
    const email=event.target.emailEntered.value;
    const password=event.target.passwordEntered.value;

    firebase
    .auth()
    .signInWithEmailAndPassword(email,password)
    .then(({user})=>{
      return user.getTokenId().then((idToken)=>{
        return fetch('/signInWithGoogle',{
          method:'POST',
          headers:{
            Accept:'application/json',
            'Content-Type':'application/json',
            'CSRF-Token':Cookies.get('XSRF-TOKEN')
          },
          body:JSON.stringify({idToken})
        })
      })
    })
    .then(()=>{
      return firebase.auth().signOut()
    })
    .then(()=>{
      window.location.assign('/about')
    })
    return false;

  })
</script> -->
